# ============================================
# APPLICATION CONFIGURATION FILE
# ============================================
# This file contains all the settings our application needs to run.
# Think of it as the "control panel" for our app.

# --------------------------------------------
# APPLICATION NAME
# --------------------------------------------
# This is just a friendly name that appears in logs and monitoring tools
spring.application.name=Diet Balance Nutrient Tracker

# --------------------------------------------
# SERVER CONFIGURATION
# --------------------------------------------
# Port: This is the "door number" where our application listens for requests
# Default is 8080, so our app will be available at http://localhost:8080
server.port=8080

# Error details: When something goes wrong, show detailed error messages
# This helps during development. In production, you might want to hide details for security.
server.error.include-message=always
server.error.include-binding-errors=always

# --------------------------------------------
# DATABASE CONNECTION SETTINGS
# --------------------------------------------
# These settings tell our app how to connect to the MySQL database

# JDBC URL: This is the "address" of our database
# Format: jdbc:mysql://[host]:[port]/[database_name]
# localhost = the database is on the same computer
# 3306 = default MySQL port
# nutrition_db = name of our database
spring.datasource.url=jdbc:mysql://localhost:3306/nutrition_db?createDatabaseIfNotExist=true

# Database username: The account name to log into the database
spring.datasource.username=root

# Database password: The password for the database account
# IMPORTANT: In production, never put passwords directly in this file!
# Use environment variables or a secrets manager instead.
spring.datasource.password=root

# Database driver: This is the "translator" between Java and MySQL
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --------------------------------------------
# JPA/HIBERNATE CONFIGURATION
# --------------------------------------------
# JPA = Java Persistence API (how we save data)
# Hibernate = The tool that implements JPA

# DDL Auto: This controls what happens to database tables when the app starts
# Options:
#   - create: Delete all tables and create new ones (LOSES ALL DATA!)
#   - create-drop: Create tables on start, drop them on shutdown
#   - update: Update existing tables to match our code (safest for development)
#   - validate: Just check if tables match our code, don't change anything
#   - none: Don't do anything automatically
# We use 'update' so tables are created/modified automatically during development
spring.jpa.hibernate.ddl-auto=update

# Show SQL: Print all database queries to the console
# This is super helpful for learning and debugging!
# You can see exactly what SQL commands are being executed.
spring.jpa.show-sql=true

# Format SQL: Make the SQL queries pretty and easy to read in the console
spring.jpa.properties.hibernate.format_sql=true

# SQL Comments: Add helpful comments to SQL queries showing which part of code generated them
spring.jpa.properties.hibernate.use_sql_comments=true

# Dialect: This tells Hibernate which "flavor" of SQL to use
# Different databases have slightly different SQL syntax
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# --------------------------------------------
# LOGGING CONFIGURATION
# --------------------------------------------
# Logging helps us see what's happening inside our application
# It's like a diary that records important events

# Root logging level: How much detail to show in logs
# Levels: TRACE < DEBUG < INFO < WARN < ERROR
# INFO = Show important events but not too much detail
logging.level.root=INFO

# Our application's logging: Show more detail for our own code
logging.level.com.nutrition=DEBUG

# Hibernate logging: Show what Hibernate is doing with the database
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Spring Security logging: See authentication and authorization events
logging.level.org.springframework.security=DEBUG

# --------------------------------------------
# JWT (JSON WEB TOKEN) CONFIGURATION
# --------------------------------------------
# JWT is used for user authentication - it's like a digital ID card

# Secret Key: This is used to sign and verify tokens
# IMPORTANT: This should be a long, random string
# In production, NEVER put this in the code! Use environment variables.
# This key should be at least 256 bits (32 characters) for HS256 algorithm
jwt.secret=MyVerySecretKeyThatIsAtLeast32CharactersLongForHS256Algorithm

# Token Expiration: How long a token is valid (in milliseconds)
# 86400000 ms = 24 hours
# After this time, users need to log in again
jwt.expiration=86400000

# --------------------------------------------
# JACKSON (JSON) CONFIGURATION
# --------------------------------------------
# Jackson converts our Java objects to JSON and vice versa

# Date format: How to format dates in JSON responses
# This makes dates look like: "2024-02-18T10:30:00"
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss
spring.jackson.time-zone=UTC

# Fail on empty beans: Don't throw error if we try to convert an empty object to JSON
spring.jackson.serialization.fail-on-empty-beans=false

# --------------------------------------------
# FILE UPLOAD CONFIGURATION
# --------------------------------------------
# These settings control file uploads (like food images in the future)

# Max file size: Maximum size for a single file (10MB)
spring.servlet.multipart.max-file-size=10MB

# Max request size: Maximum size for entire request including all files (10MB)
spring.servlet.multipart.max-request-size=10MB

# --------------------------------------------
# DEVELOPMENT HELPERS
# --------------------------------------------

# Jackson: handle lazy loading proxies gracefully
spring.jackson.serialization.fail-on-empty-beans=false

# --------------------------------------------
# OLLAMA AI CONFIGURATION
# --------------------------------------------
# Base URL of the local Ollama server
ollama.base-url=http://localhost:11434

# Model to use for AI chat (llama3.2:3b is lightweight and fast)
ollama.model=llama3.2:1b

# --------------------------------------------
# NOTES FOR PRODUCTION DEPLOYMENT
# --------------------------------------------
# When deploying to production, remember to:
# 1. Change database password and use environment variables
# 2. Change JWT secret to a strong random value
# 3. Set spring.jpa.hibernate.ddl-auto=validate (not update!)
# 4. Reduce logging levels (INFO or WARN instead of DEBUG)
# 5. Set server.error.include-message=never for security
# 6. Use HTTPS (not HTTP) for all connections
